* XOR Gate using 2 Inverters and 2 Transmission Gates (8 MOSFETs total)
* Supply: 5V, Simple LEVEL=1 Models

* MOSFET Models (NMOS and PMOS)
.model NMOS NMOS LEVEL=1 VTO=0.7 KP=50u GAMMA=0.5 LAMBDA=0.01 PHI=0.6
.model PMOS PMOS LEVEL=1 VTO=-0.7 KP=25u GAMMA=0.5 LAMBDA=0.01 PHI=0.6
.model AO3400 VDMOS(Rg=3 Rd=5m Rs=8m Vto=1.0 Kp=40 Cgdmax=300p Cgdmin=40p Cgs=620p Cjo=45p m=0.3 Vj=0.5 Is=5p N=1.3 Rb=10m Ksubthres=0.1)
.model AO3401A VDMOS(pchannel Rg=3 Rd=10m Rs=10m Vto=-1.0 Kp=25 Cgdmax=400p Cgdmin=80p Cgs=390p Cjo=140p Is=3.0p Rb=20m m=0.5 Vj=0.75 ksubthres=0.1)


* Supply Voltage
VDD VDD 0 DC 3.3V

* Input Signals (Pulses to test XOR: A and B toggle to cover truth table)
VA A 0 PULSE(0 3.3 0 1n 1n 10u 20u)  ; A: low for 20us, high for 20us
VB B 0 PULSE(0 3.3 0 1n 1n 5u 10u)   ; B: low for 10us, high for 10us, repeats

* Inverter 1: Input A, Output A_bar
MP1 A_bar A VDD VDD AO3401A W=10u L=2u
MN1 A_bar A 0 0 AO3400 W=5u L=2u

* Inverter 2: Input B, Output B_bar
MP2 B_bar B VDD VDD AO3401A W=10u L=2u
MN2 B_bar B 0 0 AO3400 W=5u L=2u

* Transmission Gate 1: Passes A when B=0 (controlled by B_bar=1, B=0)
MP_TG1 OUT A B VDD AO3401A W=10u L=2u     ; PMOS gate to B (control_bar)
MN_TG1 OUT A B_bar 0 AO3400 W=5u L=2u    ; NMOS gate to B_bar (control)

* Transmission Gate 2: Passes A_bar when B=1 (controlled by B=1, B_bar=0)
MP_TG2 OUT A_bar B_bar VDD AO3401A W=10u L=2u  ; PMOS gate to B_bar (control_bar)
MN_TG2 OUT A_bar B 0 AO3400 W=5u L=2u         ; NMOS gate to B (control)

* Simulation Control
.tran 0.1u 40u  ; Transient analysis: 0 to 40us, step 0.1us
.end
